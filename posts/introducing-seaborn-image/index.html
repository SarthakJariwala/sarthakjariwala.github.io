<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=author content="Sarthak Jariwala"><meta name=description content="Introducing `seaborn-image` for image visualization in Python"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Attractive, Effective & Descriptive Image Visualization in Python"><meta name=twitter:description content="Introducing `seaborn-image` for image visualization in Python"><meta property="og:title" content="Attractive, Effective & Descriptive Image Visualization in Python"><meta property="og:description" content="Introducing `seaborn-image` for image visualization in Python"><meta property="og:type" content="article"><meta property="og:url" content="https://sarthakjariwala.github.io/posts/introducing-seaborn-image/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-26T09:56:20-08:00"><meta property="article:modified_time" content="2021-02-26T09:56:20-08:00"><title>Attractive, Effective & Descriptive Image Visualization in Python · Sarthak Jariwala</title><link rel=canonical href=https://sarthakjariwala.github.io/posts/introducing-seaborn-image/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 integrity="sha256-hEIt6X6xzye8ubyk8/uxjz68cRZHsJxoKS9fQ8idUGQ=" crossorigin><link rel=stylesheet href=/css/coder.min.abe8b6775d85a01169c10329309df501aa8a008ab354002f7858f077cae76020.css integrity="sha256-q+i2d12FoBFpwQMpMJ31AaqKAIqzVAAveFjwd8rnYCA=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.89c82b6022b96f77aeb521b240daec4f87ea029d84d1c78b8acd0735b91b3c92.css integrity="sha256-icgrYCK5b3eutSGyQNrsT4fqAp2E0ceLis0HNbkbPJI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.1/twemoji.min.js integrity=sha384-5f4X0lBluNY/Ib4VhGx0Pf6iDCF99VGXJIyYy7dDLY5QlEd7Ap0hICSSZA1XYbc4 crossorigin=anonymous></script><meta name=generator content="Hugo 0.82.1"></head><body class=colorscheme-auto onload=twemoji.parse(document.body)><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Sarthak Jariwala</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://sarthakjariwala.github.io/posts/introducing-seaborn-image/>Attractive, Effective & Descriptive Image Visualization in Python</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2021-02-26T09:56:20-08:00>February 26, 2021</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
4-minute read</span></div></div></header><div><blockquote><p>Add scalebars, visualize image distribution, correct outliers, and more.</p></blockquote><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/1d1ajhzj0n67b4qbwdsl.png alt="Alt Text"></p><p>This post introduces some of the functionalities in <a href=https://github.com/SarthakJariwala/seaborn-image>seaborn-image</a> for descriptive, effective and attractive image visualization.</p><p><a href=https://github.com/SarthakJariwala/seaborn-image>Seaborn-image</a> is an open source python visualization library for images built on top of <a href=https://matplotlib.org/>matplotlib</a>. It aims to provide a high level API to visualize image data similar to how <a href=https://seaborn.pydata.org/>seaborn</a> provides high level API to visualize tabular data. As the name suggests, <code>seaborn-image</code> is heavily inspired by the <code>seaborn</code> library.</p><ul><li><a href=#installation>Installation</a></li><li><a href=#2-d-images>2-D Images</a></li><li><a href=#draw-a-scalebar>Add Scalebar</a></li><li><a href=#correct-for-outliers>Correct Outliers</a></li><li><a href=#image-data-distribution>Image Data Distribution</a></li></ul><hr><h1 id=installation>Installation
<a class=heading-link href=#installation><i class="fa fa-link" aria-hidden=true></i></a></h1><p>Let&rsquo;s begin by installing <code>seaborn-image</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pip install --upgrade seaborn-image
</code></pre></div><p>and then importing <code>seaborn-image</code> as <code>isns</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> seaborn_image <span style=color:#f92672>as</span> isns

<span style=color:#75715e># set context </span>
isns<span style=color:#f92672>.</span>set_context(<span style=color:#e6db74>&#34;notebook&#34;</span>)

<span style=color:#75715e># set global image settings</span>
isns<span style=color:#f92672>.</span>set_image(cmap<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;deep&#34;</span>, origin<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;lower&#34;</span>)

<span style=color:#75715e># load sample dataset</span>
polymer <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>load_image(<span style=color:#e6db74>&#34;polymer&#34;</span>)
</code></pre></div><p>All the functions in <code>seaborn-image</code> are available in a flat namespace.</p><p><code>isns.set_context()</code> helps us globally change the display contexts (similar to <code>seaborn.set_context()</code>).</p><p>In addition to the context, we also globally set properties for drawing our image using <code>isns.set_image()</code>. Later, we will also look at globally setting image scalebar properties using <code>isns.set_scalebar()</code>.</p><p>Under the hood, these functions use <a href=https://matplotlib.org/tutorials/introductory/customizing.html>matplotlib rcParams</a> for customizing displays. You can refer to the <a href=https://seaborn-image.readthedocs.io/en/latest/api/_context.html>docs</a> for more details on settings in <code>seaborn-image</code>.</p><p>Lastly, we load a sample polymer dataset from <code>seaborn-image</code>.</p><h1 id=2-d-images>2-D Images
<a class=heading-link href=#2-d-images><i class="fa fa-link" aria-hidden=true></i></a></h1><p>Visualizing the image is as simple as calling the <a href=https://seaborn-image.readthedocs.io/en/latest/api/imgplot.html><code>imgplot()</code></a> function with the image data. <code>imgplot()</code> uses <a href=https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.imshow.html>matplotlib imshow</a> under the hood but provides easy access to a lot of customizations. We will take a look at a few of the customizations in this blog post.</p><p>By default, it adds a <code>colorbar</code> and turns off axis ticks. However, that is only beginning to scratch the surface!</p><p>We can get some basic descriptive statistics about our image data by setting <code>describe=True</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>ax <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>imgplot(
    polymer,
    describe<span style=color:#f92672>=</span>True,  <span style=color:#75715e># default is False</span>
)
</code></pre></div><pre><code>No. of Obs. : 65536
Min. Value : -8.2457214
Max. Value : 43.714034999999996
Mean : 7.456410761947062
Variance : 92.02680396572863
Skewness : 0.47745180538933696
</code></pre><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/bvt3c9rcp82zjslytmyb.png alt=2d-image-viz></p><blockquote><p>You can also use <code>imshow</code>, an alias for <code>imgplot</code></p></blockquote><h1 id=draw-a-scalebar>Draw a Scalebar
<a class=heading-link href=#draw-a-scalebar><i class="fa fa-link" aria-hidden=true></i></a></h1><p>Although we know some basic information about our image data, we still do not have any information about the physical size of the features in the image. We can draw a scalebar to rectify it.</p><p>To add a scalebar to the image we can specify the individul pixel size <code>dx</code> and physical <code>units</code>. Here, the individual pixel is 15 nanometers in physical size. So, we set <code>dx=15</code> and <code>units="nm"</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>ax <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>imgplot(
    polymer,
    dx<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span>,  <span style=color:#75715e># physical size of the pixel</span>
    units<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nm&#34;</span>,  <span style=color:#75715e># units </span>
    cbar_label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Height (nm)&#34;</span>  <span style=color:#75715e># colorbar label to our image</span>
)
</code></pre></div><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/ry9cmfgr6iq1m906a992.png alt=image-with-scalebar></p><blockquote><p>Note: We only specified the individual pixel size and units, and a scalebar of appropriate size was drawn.</p></blockquote><blockquote><p>Tip: You can change the scalebar properties such as scalebar location, label location, color, etc. globally using <a href=https://seaborn-image.readthedocs.io/en/latest/api/_context.html#seaborn_image.set_scalebar><code>isns.set_scalebar()</code></a></p></blockquote><h1 id=correct-for-outliers>Correct for Outliers
<a class=heading-link href=#correct-for-outliers><i class="fa fa-link" aria-hidden=true></i></a></h1><p>Real data is never perfect. It is often riddled with outliers and these outliers affect the image display.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># sample data with outliers</span>
pol_outliers <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>load_image(<span style=color:#e6db74>&#34;polymer outliers&#34;</span>)

ax <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>imgplot(pol_outliers, cbar_label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Height (nm)&#34;</span>)
</code></pre></div><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/xel9ejs2f2058f74ocze.png alt=img-with-outliers></p><p>The above example dataset has a single outlier pixel which is affecting the image display. We can correct for the outliers using the <code>robust</code> parameter in all <code>seaborn-image</code> <a href=https://seaborn-image.readthedocs.io/en/latest/reference.html>functions</a>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>ax <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>imgplot(
    pol_outliers,
    robust<span style=color:#f92672>=</span>True,  <span style=color:#75715e># set robust plotting</span>
    perc<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>99.5</span>),  <span style=color:#75715e># set the percentile of the data to view</span>
    cbar_label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Height (nm)&#34;</span>
)
</code></pre></div><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/hclbuxcx5edorfain05v.png alt=outlier-corrected-image></p><p>Here, we are setting <code>robust=True</code> and plotting 0.5 to 99.5 percentile of the data (specified using the <code>perc</code> parameter). Doing so appropriately scales the colormap based on the robust percentile specified and also draws colorbar extensions without any additional code.</p><blockquote><p>Note: You can specify the <code>vmin</code> and <code>vmax</code> parameter to override the <code>robust</code> parameter. See <code>imgplot</code> <a href=https://seaborn-image.readthedocs.io/en/latest/api/imgplot.html>documentation examples</a> for more details</p></blockquote><h1 id=image-data-distribution>Image Data Distribution
<a class=heading-link href=#image-data-distribution><i class="fa fa-link" aria-hidden=true></i></a></h1><p>One of the most important things in image visualization is knowing the distribution of the underlying image data. Here, we are using <a href=https://seaborn-image.readthedocs.io/en/latest/api/imghist.html><code>imghist()</code></a> to plot a histogram along with the image.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>fig <span style=color:#f92672>=</span> isns<span style=color:#f92672>.</span>imghist(polymer, dx<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span>, units<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nm&#34;</span>, cbar_label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Height (nm)&#34;</span>)
</code></pre></div><blockquote><p>Note that there are no new parameters required.</p></blockquote><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/1d1ajhzj0n67b4qbwdsl.png alt=image-with-histogram></p><p>Using histogram along with an appropriate colormap provides additional information about the image data. For instance, from the histogram above, we can see that majority of the data has values less than 30 nm and there are very few values that are close to 40 nm - something that may not be obvious if we look at the image without the histogram.</p><blockquote><p>Tip: You can change the number of bins using the <code>bins</code> parameter and the orientation of the colorbar and histogram using the <code>orientation</code> parameter. See <code>imghist</code> <a href=https://seaborn-image.readthedocs.io/en/latest/api/imghist.html>documentation examples</a> for more details</p></blockquote><p>Importantly, generating the entire figure - with a histogram matching the colorbar levels, scalebar describing the physical size of the features in the image, colorbar label, hiding axis ticks, etc. - took only one line of code. In essense, this is what <code>seaborn-image</code> aims to provide - a high level API for <strong><em>attractive, descriptive and effective image visualization</em></strong>.</p><p>Lastly, this post has only introduced <strong>some</strong> of the high level API that <code>seaborn-image</code> provides for image visualization. For more details, you can check out the detailed <a href=https://seaborn-image.readthedocs.io/en/latest/>documentation</a> and <a href=https://seaborn-image.readthedocs.io/en/latest/tutorial.html>tutorials</a> and the project on <a href=https://github.com/SarthakJariwala/seaborn-image>GitHub</a>.</p><p>Thanks for reading!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2021
Sarthak Jariwala
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/dark-mode.min.aee9c8a464eb7b3534c7110f7c5e169e7039e2fd92710e0626d451d6725af137.js integrity="sha256-runIpGTrezU0xxEPfF4WnnA54v2ScQ4GJtRR1nJa8Tc="></script><script data-goatcounter=https://sarthakjariwala.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>